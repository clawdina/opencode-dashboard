# ==============================================================================
# OpenCode Dashboard — Environment Configuration
# ==============================================================================
# Copy this file to .env.local and fill in values before running.
# NEVER commit .env.local — it is gitignored by default.
# ==============================================================================

# ------------------------------------------------------------------------------
# HOST BINDING
# ------------------------------------------------------------------------------
# Bind to 127.0.0.1 (loopback only) so the dashboard is never exposed on LAN
# or public interfaces. Access remotely via SSH tunnel or Tailscale only.
#
#   ssh -N -L 3000:127.0.0.1:3000 user@mac-mini
#
HOST=127.0.0.1
PORT=3000

# ------------------------------------------------------------------------------
# API AUTHENTICATION
# ------------------------------------------------------------------------------
# Shared secret used by the opencode-hook and any client hitting /api/*.
# Generate one with:   openssl rand -hex 32
# The hook sends this as:  Authorization: Bearer <token>
# All POST endpoints MUST reject requests without a valid token.
#
DASHBOARD_API_KEY=CHANGE_ME_openssl_rand_hex_32

# ------------------------------------------------------------------------------
# CORS — ALLOWED ORIGINS
# ------------------------------------------------------------------------------
# Comma-separated list of origins permitted to call the API.
# Keep this tight. Examples:
#   http://127.0.0.1:3000           — local web dashboard
#   http://localhost:3000            — local alias
#   exp://192.168.1.x:8081          — Expo dev client on LAN
#
# Do NOT use "*" in production.
#
ALLOWED_ORIGINS=http://127.0.0.1:3000,http://localhost:3000

# ------------------------------------------------------------------------------
# RATE LIMITING
# ------------------------------------------------------------------------------
# Max requests per window per IP. Protects write endpoints from abuse.
#
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=60

# ------------------------------------------------------------------------------
# DASHBOARD URL (used by opencode-hook on the agent side)
# ------------------------------------------------------------------------------
# Where the hook POSTs events. Should match HOST:PORT above.
# If accessing over SSH tunnel from agent machine, keep as localhost.
#
DASHBOARD_URL=http://127.0.0.1:3000

# ------------------------------------------------------------------------------
# DATA DIRECTORY (optional override)
# ------------------------------------------------------------------------------
# Default: ~/.opencode-dashboard
# Contains: data.db (SQLite) and key (NaCl encryption key, chmod 600)
#
# DATA_DIR=~/.opencode-dashboard
